// ============================================================
// shared_data.js - 공유 세트/아이템 데이터
// ============================================================
// ※ 이 파일은 project1(index.html)과 project2(eq_index.html)
//    양쪽에서 공통으로 사용하는 세트/아이템명 데이터를 담습니다.
// ※ 로드 순서: 이 파일을 constants.js/eq_data.js 보다 먼저 로드하세요.
// ============================================================

/* ============================================================
   [섹션 1] 방어구 세트
   - ARMOR_SETS       : 세트명 → 슬롯 배열 (project2 기준)
   - ARMOR_DISPLAY_NAMES : 세트명 → 슬롯 → 실제 아이템명 (project2 기준)
   - ARMOR_PREFIX     : 세트명 → 접두어 배열 (project2 기준)
   ============================================================ */

const ARMOR_SETS = {
    "어느 말괄량이의 탐사복":   ["상의", "하의", "어깨", "벨트", "신발"],
    "포이즈닝 퀸 스파이더":    ["상의", "하의", "어깨", "벨트", "신발"],
    "거인의 스펙쿨룸 아이언":   ["상의", "하의", "어깨", "벨트", "신발"],
    "어둠을 쏘아 내리는 자":   ["상의", "하의", "어깨", "벨트", "신발"],
    "수호자의 초합금":         ["상의", "하의", "어깨", "벨트", "신발"],
    "스틱키 애시드 웨펀":      ["상의", "하의", "어깨", "벨트", "신발"],
    "섬뜩한 강철 용":          ["상의", "하의", "어깨", "벨트", "신발"],
    "익스플로시브 버닝 스톤":   ["상의", "하의", "어깨", "벨트", "신발"],
    "빛의 헌신자":             ["상의", "하의", "어깨", "벨트", "신발"],
    "여명을 쏘아 올리는 자":   ["상의", "하의", "어깨", "벨트", "신발"],
    "콰트로 카시테움":         ["상의", "하의", "어깨", "벨트", "신발"],
    "그란테 전투기갑 파츠":    ["상의", "하의", "어깨", "벨트", "신발"],
    "레거시: 마력의 소용돌이": ["상의", "하의", "어깨", "벨트", "신발"],
    "레거시: 자연의 수호자":   ["상의", "하의", "어깨", "벨트", "신발"]
};

const ARMOR_PREFIX = {
    "어느 말괄량이의 탐사복":   ["전격", "허상"],
    "포이즈닝 퀸 스파이더":    ["작열", "침식"],
    "거인의 스펙쿨룸 아이언":   ["수호", "왜곡"],
    "어둠을 쏘아 내리는 자":   ["자상", "맹독"],
    "수호자의 초합금":         ["허상", "보호"],
    "스틱키 애시드 웨펀":      ["맹독", "왜곡"],
    "섬뜩한 강철 용":          ["쇄도", "침식"],
    "익스플로시브 버닝 스톤":   ["신속", "연격"],
    "빛의 헌신자":             ["수호", "연격"],
    "여명을 쏘아 올리는 자":   ["자상", "쇄도"],
    "콰트로 카시테움":         ["작열", "보호"],
    "그란테 전투기갑 파츠":    ["신속", "전격"],
    "레거시: 마력의 소용돌이": ["레거시"],
    "레거시: 자연의 수호자":   ["레거시"]
};

// 세트별 슬롯별 실제 아이템명
// - 상의처럼 2개 변형이 있는 경우 배열로 표기 [고급, 일반]
// - 나머지 슬롯은 문자열
const ARMOR_DISPLAY_NAMES = {
    "어느 말괄량이의 탐사복": {
        "상의": ["못말리는 말괄량이의 가죽", "어느 말괄량이의 가죽 자켓"],
        "하의": "어느 말괄량이의 버블 반바지",
        "어깨": "어느 말괄량이의 특수 고글",
        "벨트": "어느 말괄량이의 벨트",
        "신발": "어느 말괄량이의 신발"
    },
    "포이즈닝 퀸 스파이더": {
        "상의": ["엠프리스 스파이더 상의", "퀸 스파이더 상의"],
        "하의": "퀸 스파이더 하의",
        "어깨": "퀸 스파이더 머리",
        "벨트": "퀸 스파이더 벨트 장식",
        "신발": "퀸 스파이더 신발"
    },
    "거인의 스펙쿨룸 아이언": {
        "상의": ["거신의 스펙쿨룸 상의", "거인의 스펙쿨룸 상의"],
        "하의": "거인의 스펙쿨룸 하의",
        "어깨": "거인의 스펙쿨룸 어깨 장식",
        "벨트": "거인의 스펙쿨룸 허리띠",
        "신발": "거인의 스펙쿨룸 신발"
    },
    "어둠을 쏘아 내리는 자": {
        "상의": ["밤을 쏘아 내리는 자의 상의", "어둠을 쏘아 내리는 자의 상의"],
        "하의": "어둠을 쏘아 내리는 자의 하의",
        "어깨": "어둠을 쏘아 내리는 자의 어깨 덧댐",
        "벨트": "어둠을 쏘아 내리는 자의 허리띠",
        "신발": "어둠을 쏘아 내리는 자의 신발"
    },
    "수호자의 초합금": {
        "상의": ["수호군주의 초합금 상의", "수호자의 초합금 상의"],
        "하의": "수호자의 초합금 하의",
        "어깨": "수호자의 초합금 어깨",
        "벨트": "수호자의 초합금 벨트",
        "신발": "수호자의 초합금 신발"
    },
    "스틱키 애시드 웨펀": {
        "상의": ["네트 스파이더 상의", "웹 스파이더의 상의"],
        "하의": "웹 스파이더의 하의",
        "어깨": "웹 스파이더의 어깨",
        "벨트": "웹 스파이더의 허리",
        "신발": "웹 스파이더의 신발"
    },
    "섬뜩한 강철 용": {
        "상의": ["강철 용의 스케일 재킷", "강철 용의 가죽 재킷"],
        "하의": "강철 용의 가죽 그리브",
        "어깨": "강철 용의 뿔 장식",
        "벨트": "강철 용의 휴대용 벨트",
        "신발": "강철 용의 가죽 신발"
    },
    "익스플로시브 버닝 스톤": {
        "상의": ["블레이징 기어 플레이트 메일", "버닝 기어 플레이트 메일"],
        "하의": "버닝 기어 플레이트 레깅스",
        "어깨": "버닝 기어 플레이트 햇",
        "벨트": "버닝 기어 플레이트 코일",
        "신발": "버닝 기어 플레이트 사바톤"
    },
    "빛의 헌신자": {
        "상의": ["빛의 수호자의 상의", "빛의 헌신자의 상의"],
        "하의": "빛의 헌신자의 하의",
        "어깨": "빛의 헌신자의 모자",
        "벨트": "빛의 헌신자의 허리장식",
        "신발": "빛의 헌신자의 신발"
    },
    "여명을 쏘아 올리는 자": {
        "상의": ["여명을 밝힌 자의 상의", "여명을 쏘아 올리는 자의 상의"],
        "하의": "여명을 쏘아 올리는 자의 바지",
        "어깨": "여명을 쏘아 올리는 자의 어깨 덧댐",
        "벨트": "여명을 쏘아 올리는 자의 허리띠",
        "신발": "여명을 쏘아 올리는 자의 신발"
    },
    "콰트로 카시테움": {
        "상의": ["콰트로 카시테움 아머Mk2", "콰트로 카시테움 아머"],
        "하의": "콰트로 카시테움 각반",
        "어깨": "콰트로 카시테움 새로운 손",
        "벨트": "콰트로 카시테움 코일",
        "신발": "콰트로 카시테움 그리브"
    },
    "그란테 전투기갑 파츠": {
        "상의": ["그런데 마누스 전투기갑 상의", "그란데 전투기갑 상의"],
        "하의": "그란데 전투기갑 하의",
        "어깨": "그란데 전투기갑 헤드기어",
        "벨트": "그란데 전투기갑 허리",
        "신발": "그란데 전투기갑 신발"
    },
    "레거시: 마력의 소용돌이": {
        "상의": ["레거시: 휘몰아치는 마력의 태풍", "레거시: 마력의 폭풍우"],
        "하의": "레거시: 영력의 회오리",
        "어깨": "레거시: 마법의 대격변",
        "벨트": "레거시: 마나의 소용돌이",
        "신발": "레거시: 정수의 태풍"
    },
    "레거시: 자연의 수호자": {
        "상의": ["레거시: 루미너스 오토 상의", "레거시: 라이트니스 오토 상의"],
        "하의": "레거시: 파이어니스 오토 하의",
        "어깨": "레거시: 블랙니스 오토 어깨",
        "벨트": "레거시: 아이니스 오토 벨트",
        "신발": "레거시: 윈드니스 오토 신발"
    }
};

// ※ project1 호환용: armorSets (세트명 → 아이템명 전체 배열)
// ARMOR_DISPLAY_NAMES 에서 자동 생성
const armorSets = (() => {
    const result = {};
    Object.entries(ARMOR_DISPLAY_NAMES).forEach(([setName, slotMap]) => {
        const items = [];
        Object.values(slotMap).forEach(v => {
            if (Array.isArray(v)) items.push(...v);
            else items.push(v);
        });
        result[setName] = items;
    });
    return result;
})();


/* ============================================================
   [섹션 2] 악세서리 세트
   ============================================================ */

const ACCESSORY_SETS = {
    "엘팅 메모리얼의 기억":    ["팔찌", "목걸이", "반지"],
    "섬뜩한 빛의 관리자":     ["팔찌", "목걸이", "반지"],
    "부식된 메탈기어":        ["팔찌", "목걸이", "반지"],
    "화력 개조 탄띠":         ["팔찌", "목걸이", "반지"],
    "신비로운 빛의 소용돌이":  ["팔찌", "목걸이", "반지"],
    "콰트로 마누스 연산장치":  ["팔찌", "목걸이", "반지"],
    "레거시: 에테리얼 리베넌트":  ["팔찌", "목걸이", "반지"],
    "레거시: 지나온 영광의 시대": ["팔찌", "목걸이", "반지"]
};

const ACCESSORY_PREFIX = {
    "엘팅 메모리얼의 기억":    ["견고", "혈독"],
    "섬뜩한 빛의 관리자":     ["초석", "각오"],
    "부식된 메탈기어":        ["각오", "가속"],
    "화력 개조 탄띠":         ["혈독", "견고"],
    "신비로운 빛의 소용돌이":  ["조화", "초석"],
    "콰트로 마누스 연산장치":  ["가속", "조화"],
    "레거시: 에테리얼 리베넌트":  ["레거시"],
    "레거시: 지나온 영광의 시대": ["레거시"]
};

const ACCESSORY_DISPLAY_NAMES = {
    "엘팅 메모리얼의 기억": {
        "팔찌": ["선명한 기억의 팔찌", "묻힌 시간의 팔찌"],
        "목걸이": "흐릿한 과거의 목걸이",
        "반지": "덮어둔 기억의 반지"
    },
    "섬뜩한 빛의 관리자": {
        "팔찌": ["이심전심", "무언의 연결"],
        "목걸이": "숨겨진 맥락",
        "반지": "감춰진 결"
    },
    "부식된 메탈기어": {
        "팔찌": ["기계의 심박", "기계의 맥박"],
        "목걸이": "사라진 동력",
        "반지": "정지된 흐름"
    },
    "화력 개조 탄띠": {
        "팔찌": ["멀티플 툴즈", "트리플 툴즈"],
        "목걸이": "피어싱 드릴 네클레스",
        "반지": "오토매틱 실린더"
    },
    "신비로운 빛의 소용돌이": {
        "팔찌": ["시린 달빛", "푸른 달빛"],
        "목걸이": "은색의 별빛",
        "반지": "붉은 햇빛"
    },
    "콰트로 마누스 연산장치": {
        "팔찌": ["기계의 주시", "기계의 시선"],
        "목걸이": "에너지의 눈",
        "반지": "응시의 흔적"
    },
    "레거시: 에테리얼 리베넌트": {
        "팔찌": ["레거시: 아이언 엠벨리시드 밴드", "레거시: 강철 리스트 가드"],
        "목걸이": "레거시: 영혼 추적장치",
        "반지": "레거시: 할기의 본링"
    },
    "레거시: 지나온 영광의 시대": {
        "팔찌": ["레거시: 세이트 루멘아이트 렐릭", "레거시: 홀리 미스릴 렐릭"],
        "목걸이": "레거시: 펠 로스 글로리",
        "반지": "레거시: 에이션트 엘븐 링"
    }
};

// 악세 추가 정보 (project2 전용이지만 shared에 보관)
const ACCESSORY_EXTRA_INFO = {
    "엘팅 메모리얼의 기억":    "선명한,묻힌 / 흐릿한 / 덮어둔",
    "섬뜩한 빛의 관리자":     "이심전심,무언 / 숨겨진 / 감춰진",
    "부식된 메탈기어":        "기계의 심박,맥박 / 사라진 / 정지",
    "화력 개조 탄띠":         "멀티플,트리플 / 피어싱 / 오토매틱",
    "신비로운 빛의 소용돌이":  "시린,푸른 / 은색 / 붉은",
    "콰트로 마누스 연산장치":  "기계의 주시,시선 / 에너지 / 응시",
    "레거시: 에테리얼 리베넌트": "아이언,강철 / 영혼 / 할기",
    "레거시: 지나온 영광의 시대": "세이트,홀리 / 펠 / 에이션트"
};

// ※ project1 호환용: accSets
const accSets = (() => {
    const result = {};
    Object.entries(ACCESSORY_DISPLAY_NAMES).forEach(([setName, slotMap]) => {
        const items = [];
        Object.values(slotMap).forEach(v => {
            if (Array.isArray(v)) items.push(...v);
            else items.push(v);
        });
        result[setName] = items;
    });
    return result;
})();


/* ============================================================
   [섹션 3] 특수장비 세트
   ============================================================ */

const SPECIAL_SETS = {
    "개구쟁이 호문쿨루스":     ["귀걸이", "마법석", "보장"],
    "라이트닝 에너지 코어":    ["귀걸이", "마법석", "보장"],
    "철갑을 두른 탑의 수호꾼": ["귀걸이", "마법석", "보장"],
    "깊은 불구덩이의 섬멸자":  ["귀걸이", "마법석", "보장"],
    "허영 속 어둠의 피조물":   ["귀걸이", "마법석", "보장"],
    "부정한 빛의 우상":        ["귀걸이", "마법석", "보장"]
};

const SPECIAL_PREFIX = {
    "개구쟁이 호문쿨루스":     ["불굴", "숙련"],
    "라이트닝 에너지 코어":    ["숙련", "결의"],
    "철갑을 두른 탑의 수호꾼": ["격변", "촉진"],
    "깊은 불구덩이의 섬멸자":  ["불굴", "촉진"],
    "허영 속 어둠의 피조물":   ["질주", "결의"],
    "부정한 빛의 우상":        ["질주", "격변"]
};

const SPECIAL_DISPLAY_NAMES = {
    "개구쟁이 호문쿨루스": {
        "귀걸이": ["말괄량이의 문양 귀걸이", "베키의 문양 귀걸이"],
        "마법석": "베키의 새총",
        "보장":   "베키의 장갑"
    },
    "라이트닝 에너지 코어": {
        "귀걸이": ["거신의 스펙쿨룸 이어링", "거인의 스펙쿨룸 이어링"],
        "마법석": "거인의 스펙쿨룸 코어",
        "보장":   "거인의 건들릿"
    },
    "철갑을 두른 탑의 수호꾼": {
        "귀걸이": ["메탈기어의 초합금 태엽", "메탈기어의 태엽 귀걸이"],
        "마법석": "메탈기어의 두뇌",
        "보장":   "메탈기어의 조작부"
    },
    "깊은 불구덩이의 섬멸자": {
        "귀걸이": ["강철 용의 기관총 이어링", "강철 용의 기총 이어링"],
        "마법석": "강철 용의 천공기",
        "보장":   "강철 용의 칼날 외골격"
    },
    "허영 속 어둠의 피조물": {
        "귀걸이": ["골드 크라운의 서커스 장식", "골드 크라운의 머리 장식"],
        "마법석": "골드 크라운의 핵심 부품",
        "보장":   "골드 크라운의 에너지 방출기"
    },
    "부정한 빛의 우상": {
        "귀걸이": ["콰트로 마누스의 기억", "콰트로 마누스의 태엽 장식"],
        "마법석": "콰트로 마누스의 두뇌",
        "보장":   "콰트로 마누스의 에너지 코어"
    }
};

// 특장 추가 정보 (project2 전용이지만 shared에 보관)
const SPECIAL_EXTRA_INFO = {
    "개구쟁이 호문쿨루스":     "말괄량이,베키",
    "라이트닝 에너지 코어":    "거신,거인",
    "철갑을 두른 탑의 수호꾼": "메탈기어",
    "깊은 불구덩이의 섬멸자":  "강철",
    "허영 속 어둠의 피조물":   "골드",
    "부정한 빛의 우상":        "콰트로"
};

// ※ project1 호환용: specialSets
const specialSets = (() => {
    const result = {};
    Object.entries(SPECIAL_DISPLAY_NAMES).forEach(([setName, slotMap]) => {
        const items = [];
        Object.values(slotMap).forEach(v => {
            if (Array.isArray(v)) items.push(...v);
            else items.push(v);
        });
        result[setName] = items;
    });
    return result;
})();


/* ============================================================
   [섹션 4] 통합 세트 (project2 전용)
   ============================================================ */

const ALL_SETS   = { ...ARMOR_SETS,   ...ACCESSORY_SETS,   ...SPECIAL_SETS   };
const ALL_PREFIX = { ...ARMOR_PREFIX, ...ACCESSORY_PREFIX, ...SPECIAL_PREFIX };

// 레거시 세트 목록 (접두어 키 생성 시 특수 처리 필요)
const LEGACY_PREFIX_SETS = [
    "레거시: 마력의 소용돌이",
    "레거시: 자연의 수호자",
    "레거시: 에테리얼 리베넌트",
    "레거시: 지나온 영광의 시대"
];

// 접두어 키 생성 헬퍼 (레거시는 setName 그대로 사용)
function makePrefixKey(pref, setName) {
    if (LEGACY_PREFIX_SETS.includes(setName)) return setName;
    return `${pref}: ${setName}`;
}


/* ============================================================
   [섹션 5] project1 전용: 마법봉인 / itemOptions / sealData
   - project1(index.html)에서만 사용하는 데이터
   - 기존 data.js 에서 이관
   ============================================================ */

// 마법봉인 옵션
const sealData = {
    weapon: {
        n1: ["", "데미지 증가", "추가 데미지", "모든 직업 50레벨스킬", "화속강", "수속강", "명속강", "암속강", "힘", "지능", "물리 공격력", "마법 공격력"],
        n2: ["", "물리 공격력", "마법 공격력", "힘", "지능", "체력", "정신력", "공격속도", "캐스팅속도", "이동속도", "최대 HP 증가", "최대 MP 증가", "물리 방어력", "마법 방어력", "적중", "회피"]
    },
    armor: {
        n1: ["", "힘", "지능", "체력", "정신력", "물리 크리티컬", "마법 크리티컬"],
        n2: ["", "물리 크리티컬", "마법 크리티컬", "힘", "지능", "체력", "정신력", "공격속도", "캐스팅속도", "이동속도", "최대 HP 증가", "최대 MP 증가", "물리 방어력", "마법 방어력", "적중", "회피"]
    },
    accessory: {
        n1: ["", "화속강", "수속강", "명속강", "암속강", "힘", "지능", "체력", "정신력"],
        n2: ["", "화속강", "수속강", "명속강", "암속강", "힘", "지능", "체력", "정신력", "공격속도", "캐스팅속도", "이동속도", "최대 HP 증가", "최대 MP 증가", "물리 방어력", "마법 방어력", "화속성 저항", "수속성 저항", "명속성 저항", "암속성 저항", "적중", "회피"]
    },
    special: {
        n1: ["", "물리 공격력", "마법 공격력", "힘", "지능", "물리 크리티컬", "마법 크리티컬", "적중", "회피"],
        n2: ["", "물리 공격력", "마법 공격력", "물리 크리티컬", "마법 크리티컬", "힘", "지능", "체력", "정신력", "공격속도", "캐스팅속도", "이동속도", "최대 HP 증가", "최대 MP 증가", "물리 방어력", "마법 방어력", "적중", "회피"]
    }
};

// 슬롯별 아이템 선택 옵션 목록 (project1 드롭다운용)
// DISPLAY_NAMES 에서 자동 생성
const itemOptions = (() => {
    const result = {};

    // 방어구 슬롯
    const armorSlots = ["상의", "하의", "어깨", "벨트", "신발"];
    armorSlots.forEach(slot => {
        result[slot] = [""];
        Object.entries(ARMOR_DISPLAY_NAMES).forEach(([setName, slotMap]) => {
            const val = slotMap[slot];
            if (!val) return;
            if (Array.isArray(val)) {
                val.forEach(v => result[slot].push(v));
                result[slot].push(""); // 세트 구분용 빈칸
            } else {
                result[slot].push(val);
            }
        });
    });

    // 악세 슬롯
    const accSlots = ["팔찌", "목걸이", "반지"];
    accSlots.forEach(slot => {
        result[slot] = [""];
        Object.entries(ACCESSORY_DISPLAY_NAMES).forEach(([setName, slotMap]) => {
            const val = slotMap[slot];
            if (!val) return;
            if (Array.isArray(val)) {
                val.forEach(v => result[slot].push(v));
                result[slot].push("");
            } else {
                result[slot].push(val);
            }
        });
    });

    // 특수장비 슬롯 (보조장비 = 보장, 귀걸이, 마법석)
    result["보조장비"] = [""];
    result["귀걸이"]   = [""];
    result["마법석"]   = [""];
    Object.entries(SPECIAL_DISPLAY_NAMES).forEach(([setName, slotMap]) => {
        const bo장 = slotMap["보장"];
        const ear  = slotMap["귀걸이"];
        const gem  = slotMap["마법석"];
        if (bo장) {
            if (Array.isArray(bo장)) result["보조장비"].push(...bo장, "");
            else result["보조장비"].push(bo장);
        }
        if (ear) {
            if (Array.isArray(ear)) result["귀걸이"].push(...ear, "");
            else result["귀걸이"].push(ear);
        }
        if (gem) {
            if (Array.isArray(gem)) result["마법석"].push(...gem, "");
            else result["마법석"].push(gem);
        }
    });

    return result;
})();

// ※ GameData 호환 객체 (기존 project1 코드가 GameData.* 로 참조하는 경우 대비)
const GameData = {
    sealData,
    itemOptions,
    armorSets,
    accSets,
    specialSets
};
