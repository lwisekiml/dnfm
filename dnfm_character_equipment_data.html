<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPG í†µí•© ì¥ë¹„ ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    <style>
        :root {
            --bg: #0f0f12;
            --table-bg: #1a1a1f;
            --border: #333;
            --border-heavy: #c5a678;
            --gold: #c5a678;
            --text: #ddd;
            --input-bg: #000;
            --fs: 11px;
            --txt-epic: #fcc419;   --txt-unique: #ff80ab; --txt-rare: #b197fc;   --txt-uncom: #4dabf7; --txt-common: #888;
            --ex-isang: #fcc419;   --ex-sunbong: #ff5252; --ex-uiji: #448aff;
            --emb-red: #4a1212; --emb-yellow: #4a3f12; --emb-blue: #121d4a; --emb-green: #124a1d; --emb-gray: #2d2d2d;
        }

        body { background-color: var(--bg); color: var(--text); font-family: 'Malgun Gothic', sans-serif; margin: 0; padding: 10px; }
        h2 { color: var(--gold); border-bottom: 2px solid var(--gold); padding-bottom: 5px; margin: 0 0 10px 0; font-size: 1.1rem; }

        .control-bar { margin-bottom: 10px; display: flex; gap: 10px; align-items: center; position: sticky; top: 0; background: var(--bg); z-index: 1000; padding: 5px 0; }
        .btn-action { background: #1d4ed8; color: white; border: none; padding: 5px 15px; cursor: pointer; border-radius: 3px; font-weight: bold; font-size: 11px;}
        .btn-add { background: #7c3aed; }
        .btn-action:hover { opacity: 0.8; }
        .status-msg { font-size: 12px; color: var(--gold); }

        /* ìºë¦­í„° í‘œ ì‚¬ì´ì˜ ê°„ê²©ì„ 50px -> 15pxë¡œ ì¶•ì†Œ */
        .char-section { margin-bottom: 15px; border: 1px solid #444; padding: 8px; border-radius: 5px; background: #141418; }
        
        .btn-char-lock { background: #b91c1c; color: white; border: 2px solid transparent; padding: 4px; cursor: pointer; font-size: 11px; border-radius: 2px; font-weight: bold; transition: border 0.2s; }
        .btn-char-unlock { background: #444; color: white; border: 2px solid transparent; padding: 4px; cursor: pointer; font-size: 11px; border-radius: 2px; transition: border 0.2s; }
        .btn-active { border: 2px solid white !important; }

        .table-container { overflow-x: auto; border: 1px solid var(--border); }
        table { border-collapse: collapse; background-color: var(--table-bg); width: max-content; font-size: var(--fs); }
        th { background-color: #2a2a32; color: var(--gold); padding: 2px 4px; border: 1px solid var(--border); white-space: nowrap; }
        .group-header { border-bottom: 2px solid var(--gold); background-color: #1a1a1f; }
        td { border: 1px solid var(--border); padding: 1px 2px; text-align: center; height: 26px; color: #888; }
        
        /* ì—´ ë„ˆë¹„ ì„¤ì • */
        .col-slot { width: 45px !important; font-weight: bold; color: var(--gold) !important; }
        .col-rarity { width: 55px !important; }
        .col-exceed { width: 45px !important; }
        .col-prefix { width: 50px !important; }
        .col-val-short { width: 35px !important; }
        .col-grade { width: 55px !important; }
        .col-emblem { width: 40px !important; }
        
        input, select {
            background: var(--input-bg); color: #fff; border: 1px solid #444;
            padding: 1px 2px; width: 100%; font-size: var(--fs); box-sizing: border-box;
            height: 22px; outline: none; text-align: center; text-align-last: center;
        }
        input:disabled, select:disabled { cursor: not-allowed; opacity: 1; -webkit-text-fill-color: inherit; }

        .rare-ì—í”½, .ex-ì´ìƒ, .prefix-selected, .bg-ì—í”½ { color: var(--txt-epic) !important; font-weight: bold; }
        .rare-ìœ ë‹ˆí¬, .bg-ìœ ë‹ˆí¬ { color: var(--txt-unique) !important; font-weight: bold; }
        .rare-ë ˆì–´, .bg-ë ˆì–´ { color: var(--txt-rare) !important; font-weight: bold; }
        .rare-ì–¸ì»¤ë¨¼, .bg-ì–¸ì»¤ë¨¼ { color: var(--txt-uncom) !important; font-weight: bold; }
        .rare-ì»¤ë¨¼, .bg-ì»¤ë¨¼ { color: var(--txt-common) !important; font-weight: bold; }
        
        .ex-ì„ ë´‰ { color: var(--ex-sunbong) !important; font-weight: bold; }
        .ex-ì˜ì§€ { color: var(--ex-uiji) !important; font-weight: bold; }

        .emb-bg-red { background-color: var(--emb-red) !important; }
        .emb-bg-yellow { background-color: var(--emb-yellow) !important; }
        .emb-bg-blue { background-color: var(--emb-blue) !important; }
        .emb-bg-green { background-color: var(--emb-green) !important; }
        .emb-bg-gray { background-color: var(--emb-gray) !important; }

        .char-info-container { display: flex; flex-direction: column; gap: 4px; padding: 10px 5px; width: 110px; }
        .artifact-main-wrapper { display: flex; gap: 8px; justify-content: start; align-items: center; padding: 5px; }
        .art-group { display: flex; flex-direction: column; gap: 3px; border: 1px solid #444; padding: 4px; background: #000; }
        .art-item { display: flex; align-items: center; gap: 3px; }
        .grade-box { display: flex; align-items: center; gap: 1px; }
    </style>
</head>
<body>

<h2>ğŸ›¡ï¸ í†µí•© ì¥ë¹„ ê´€ë¦¬ ì‹œìŠ¤í…œ</h2>

<div class="control-bar">
    <button class="btn-action" onclick="exportToJSON()">ğŸ“¤ JSON íŒŒì¼ ì €ì¥</button>
    <button class="btn-action" onclick="document.getElementById('fileInput').click()">ğŸ“¥ JSON íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸°</button>
    <button class="btn-action btn-add" onclick="createCharacterTable()">â• ìºë¦­í„° ì¶”ê°€</button>
    <input type="file" id="fileInput" style="display:none" accept=".json" onchange="importFromJSON(this)">
    <span id="statusMsg" class="status-msg"></span>
</div>

<div id="characterContainer"></div>

<script>
    const slots = ["ë¬´ê¸°", "ìƒì˜", "ì–´ê¹¨", "í•˜ì˜", "ì‹ ë°œ", "ë²¨íŠ¸", "ëª©ê±¸ì´", "íŒ”ì°Œ", "ë°˜ì§€", "ë³´ì¡°ì¥ë¹„", "ê·€ê±¸ì´", "ë§ˆë²•ì„", "ì¹­í˜¸", "ì™¸í˜•ì¹­í˜¸", "ì˜¤ë¼", "ì•„ë°”íƒ€", "í¬ë¦¬ì³"];
    const heavyBorderSlots = ["ë¬´ê¸°", "ë²¨íŠ¸", "ë°˜ì§€", "ë§ˆë²•ì„", "ì™¸í˜•ì¹­í˜¸", "ì˜¤ë¼", "ì•„ë°”íƒ€", "í¬ë¦¬ì³"];
    const prefixes = ["", "ì „ê²©", "í—ˆìƒ", "ì‘ì—´", "ì¹¨ì‹", "ìˆ˜í˜¸", "ì™œê³¡", "ììƒ", "ë§¹ë…", "ë³´í˜¸", "ì‡„ë„", "ì‹ ì†", "ì—°ê²©"];

    const mData = {
        weapon: { n1: ["", "ë°ë¯¸ì§€ ì¦ê°€", "ì¶”ê°€ ë°ë¯¸ì§€", "ëª¨ë“  ì§ì—… 50ë ˆë²¨ìŠ¤í‚¬", "í™”ì†ì„± ê°•í™”", "ìˆ˜ì†ì„± ê°•í™”", "ëª…ì†ì„± ê°•í™”", "ì•”ì†ì„± ê°•í™”", "í˜", "ì§€ëŠ¥", "ë¬¼ë¦¬ ê³µê²©ë ¥", "ë§ˆë²• ê³µê²©ë ¥"], n2: ["", "ë¬¼ë¦¬ ê³µê²©ë ¥", "ë§ˆë²• ê³µê²©ë ¥", "í˜", "ì§€ëŠ¥", "ì²´ë ¥", "ì •ì‹ ë ¥", "ê³µê²©ì†ë„", "ìºìŠ¤íŒ…ì†ë„", "ì´ë™ì†ë„", "ìµœëŒ€ HP ì¦ê°€", "ìµœëŒ€ MP ì¦ê°€", "ë¬¼ë¦¬ ë°©ì–´ë ¥", "ë§ˆë²• ë°©ì–´ë ¥", "ì ì¤‘", "íšŒí”¼"] },
        armor: { n1: ["", "í˜", "ì§€ëŠ¥", "ì²´ë ¥", "ì •ì‹ ë ¥", "ë¬¼ë¦¬ í¬ë¦¬í‹°ì»¬", "ë§ˆë²• í¬ë¦¬í‹°ì»¬"], n2: ["", "ë¬¼ë¦¬ í¬ë¦¬í‹°ì»¬", "ë§ˆë²• í¬ë¦¬í‹°ì»¬", "í˜", "ì§€ëŠ¥", "ì²´ë ¥", "ì •ì‹ ë ¥", "ê³µê²©ì†ë„", "ìºìŠ¤íŒ…ì†ë„", "ì´ë™ì†ë„", "ìµœëŒ€ HP ì¦ê°€", "ìµœëŒ€ MP ì¦ê°€", "ë¬¼ë¦¬ ë°©ì–´ë ¥", "ë§ˆë²• ë°©ì–´ë ¥", "ì ì¤‘", "íšŒí”¼"] },
        accessory: { n1: ["", "í™”ì†ì„± ê°•í™”", "ìˆ˜ì†ì„± ê°•í™”", "ëª…ì†ì„± ê°•í™”", "ì•”ì†ì„± ê°•í™”", "í˜", "ì§€ëŠ¥", "ì²´ë ¥", "ì •ì‹ ë ¥"], n2: ["", "í™”ì†ì„± ê°•í™”", "ìˆ˜ì†ì„± ê°•í™”", "ëª…ì†ì„± ê°•í™”", "ì•”ì†ì„± ê°•í™”", "í˜", "ì§€ëŠ¥", "ì²´ë ¥", "ì •ì‹ ë ¥", "ê³µê²©ì†ë„", "ìºìŠ¤íŒ…ì†ë„", "ì´ë™ì†ë„", "ìµœëŒ€ HP ì¦ê°€", "ìµœëŒ€ MP ì¦ê°€", "ë¬¼ë¦¬ ë°©ì–´ë ¥", "ë§ˆë²• ë°©ì–´ë ¥", "í™”ì†ì„± ì €í•­", "ìˆ˜ì†ì„± ì €í•­", "ëª…ì†ì„± ì €í•­", "ì•”ì†ì„± ì €í•­", "ì ì¤‘", "íšŒí”¼"] },
        special: { n1: ["", "ë¬¼ë¦¬ ê³µê²©ë ¥", "ë§ˆë²• ê³µê²©ë ¥", "í˜", "ì§€ëŠ¥", "ë¬¼ë¦¬ í¬ë¦¬í‹°ì»¬", "ë§ˆë²• í¬ë¦¬í‹°ì»¬", "ì ì¤‘", "íšŒí”¼"], n2: ["", "ë¬¼ë¦¬ ê³µê²©ë ¥", "ë§ˆë²• ê³µê²©ë ¥", "ë¬¼ë¦¬ í¬ë¦¬í‹°ì»¬", "ë§ˆë²• í¬ë¦¬í‹°ì»¬", "í˜", "ì§€ëŠ¥", "ì²´ë ¥", "ì •ì‹ ë ¥", "ê³µê²©ì†ë„", "ìºìŠ¤íŒ…ì†ë„", "ì´ë™ì†ë„", "ìµœëŒ€ HP ì¦ê°€", "ìµœëŒ€ MP ì¦ê°€", "ë¬¼ë¦¬ ë°©ì–´ë ¥", "ë§ˆë²• ë°©ì–´ë ¥", "ì ì¤‘", "íšŒí”¼"] }
    };

    const artOptions = {
        red: ["í˜", "ì§€ëŠ¥", "ì²´ë ¥", "ì •ì‹ ë ¥", "ì ì¤‘", "íšŒí”¼"],
        blue: ["HP MAX", "MP MAX", "ë¬¼ë¦¬ ê³µê²©ë ¥", "ë§ˆë²• ê³µê²©ë ¥", "ë¬¼ë¦¬ ë°©ì–´ë ¥", "ë§ˆë²• ë°©ì–´ë ¥"],
        green: ["ë¬¼ë¦¬ í¬ë¦¬í‹°ì»¬", "ë§ˆë²• í¬ë¦¬í‹°ì»¬", "ê³µê²©ì†ë„", "ìºìŠ¤íŒ…ì†ë„", "ì´ë™ì†ë„", "í™”ì†ì„± ê°•í™”", "ìˆ˜ì†ì„± ê°•í™”", "ëª…ì†ì„± ê°•í™”", "ì•”ì†ì„± ê°•í™”", "ëª¨ë“  ì†ì„± ê°•í™”"]
    };

    function createCharacterTable(savedData = null) {
        const charId = "char_" + Date.now() + Math.random().toString(16).slice(2);
        const section = document.createElement('div');
        section.className = 'char-section';
        section.id = charId;

        section.innerHTML = `
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th rowspan="2" style="width:120px;">ì§ì—…/ì´ë¦„</th>
                            <th rowspan="2" class="col-slot">ìŠ¬ë¡¯</th>
                            <th rowspan="2" class="col-rarity">í¬ê·€ë„</th>
                            <th rowspan="2" class="col-exceed">ìµì‹œë“œ</th>
                            <th rowspan="2" class="col-prefix">ì ‘ë‘ì–´</th>
                            <th rowspan="2" style="min-width:120px;">ì•„ì´í…œì´ë¦„</th>
                            <th rowspan="2" class="col-val-short">ì—°ë§ˆ</th>
                            <th rowspan="2" class="col-val-short">ê°•í™”</th>
                            <th rowspan="2" class="col-grade">ë“±ê¸‰ë³€í™˜</th>
                            <th colspan="4" class="group-header">ë§ˆë²•ë´‰ì¸</th>
                            <th colspan="2" class="group-header">ì— ë¸”ëŸ¼</th>
                            <th colspan="2" class="group-header">ë§ˆë²•ë¶€ì—¬</th>
                            <th rowspan="2" style="min-width:140px;">ì„¤ëª…</th>
                        </tr>
                        <tr>
                            <th style="width:110px;">ë§ˆë²•ë´‰ì¸</th><th class="col-val-short">ìˆ˜ì¹˜</th>
                            <th style="width:110px;">ë§ˆë²•ë´‰ì¸</th><th class="col-val-short">ìˆ˜ì¹˜</th>
                            <th class="col-emblem">ì— ë¸”ëŸ¼</th><th class="col-emblem">ì— ë¸”ëŸ¼</th>
                            <th style="width:120px;">ë§ˆë²•ë¶€ì—¬</th><th class="col-val-short">ìˆ˜ì¹˜</th>
                        </tr>
                    </thead>
                    <tbody class="tbody-content"></tbody>
                </table>
            </div>`;

        const tbody = section.querySelector('.tbody-content');
        slots.forEach((slot, index) => {
            const tr = document.createElement('tr');
            if (heavyBorderSlots.includes(slot)) tr.style.borderBottom = "2px solid var(--border-heavy)";
            
            if (index === 0) {
                tr.innerHTML += `
                    <td rowspan="17" style="background-color: #121216; vertical-align: top;">
                        <div class="char-info-container">
                            <input type="text" placeholder="ì§ì—…ëª…" oninput="autoSave()">
                            <input type="text" placeholder="ì´ë¦„" oninput="autoSave()">
                            <div style="display: flex; flex-direction: column; gap: 5px; margin-top: 10px;">
                                <button onclick="toggleEdit('${charId}', true)" class="btn-char-lock lock-btn">ì ê¸ˆ</button>
                                <button onclick="toggleEdit('${charId}', false)" class="btn-char-unlock unlock-btn">ì ê¸ˆ í•´ì œ</button>
                                <button onclick="deleteCharacter('${charId}')" class="btn-char-unlock" style="background:#b91c1c33; margin-top:10px;">ì‚­ì œ</button>
                            </div>
                        </div>
                    </td>`;
            }

            if (slot === "í¬ë¦¬ì³") {
                tr.style.backgroundColor = "#1a1a25";
                tr.innerHTML += `
                    <td class="col-slot">í¬ë¦¬ì³</td>
                    <td class="col-rarity"><select onchange="updateStyle(this, 'rarity')" class="rare-ì—í”½"><option>ì—í”½</option><option>ìœ ë‹ˆí¬</option><option>ë ˆì–´</option><option>ì–¸ì»¤ë¨¼</option></select></td>
                    <td colspan="2"><input type="text" placeholder="í¬ë¦¬ì³ ì´ë¦„" oninput="autoSave()"></td>
                    <td colspan="13">
                        <div class="artifact-main-wrapper">
                            ${['red', 'blue', 'green'].map(color => `
                                <div class="art-group">
                                    ${[1, 2].map(num => `
                                        <div class="art-item">
                                            <select class="art-color-select bg-ì—í”½" style="width:75px;" onchange="updateStyle(this, 'artBg')">
                                                <option value="ì—í”½">ì—í”½</option><option value="ìœ ë‹ˆí¬">ìœ ë‹ˆí¬</option><option value="ë ˆì–´">ë ˆì–´</option><option value="ì–¸ì»¤ë¨¼">ì–¸ì»¤ë¨¼</option><option value="ì»¤ë¨¼">ì»¤ë¨¼</option>
                                            </select>
                                            <select class="art-opt-select bg-ì—í”½" style="width:115px;" onchange="autoSave()"><option value="">ì˜µì…˜ ì„ íƒ</option>${artOptions[color].map(o=>`<option>${o}</option>`).join('')}</select>
                                        </div>
                                    `).join('')}
                                </div>
                            `).join('')}
                        </div>
                    </td>`;
            } else {
                const isEq = index < 12;
                const isEx = ['ìƒì˜', 'íŒ”ì°Œ', 'ê·€ê±¸ì´'].includes(slot);
                let g = slot === "ë¬´ê¸°" ? mData.weapon : (index < 6 ? mData.armor : (index < 9 ? mData.accessory : mData.special));
                let embClass = (["ìƒì˜", "í•˜ì˜"].includes(slot)) ? "emb-bg-red" : (["ì–´ê¹¨", "ë²¨íŠ¸"].includes(slot)) ? "emb-bg-yellow" : (["ì‹ ë°œ", "íŒ”ì°Œ"].includes(slot)) ? "emb-bg-blue" : (["ëª©ê±¸ì´", "ë°˜ì§€"].includes(slot)) ? "emb-bg-green" : (["ë³´ì¡°ì¥ë¹„", "ê·€ê±¸ì´", "ë§ˆë²•ì„", "ì¹­í˜¸"].includes(slot)) ? "emb-bg-gray" : "";

                tr.innerHTML += `
                    <td class="col-slot">${slot}</td>
                    <td class="col-rarity"><select onchange="updateStyle(this, 'rarity')" class="rare-ì—í”½"><option>ì—í”½</option><option>ìœ ë‹ˆí¬</option><option>ë ˆì–´</option><option>ì–¸ì»¤ë¨¼</option></select></td>
                    <td class="col-exceed">${isEx ? `<select onchange="updateStyle(this, 'exceed')"><option></option><option>ì´ìƒ</option><option>ì„ ë´‰</option><option>ì˜ì§€</option></select>` : '-'}</td>
                    <td class="col-prefix">${isEq ? `<select onchange="updateStyle(this, 'prefix')">${prefixes.map(p=>`<option value="${p}">${p}</option>`).join('')}</select>` : '-'}</td>
                    <td><input type="text" oninput="autoSave()"></td>
                    <td class="col-val-short">${isEq ? '<input type="text" oninput="autoSave()">' : '-'}</td>
                    <td class="col-val-short">${isEq ? '<input type="text" oninput="autoSave()">' : '-'}</td>
                    <td class="col-grade">${isEq ? '<div class="grade-box"><input type="text" oninput="autoSave()"><span>%</span></div>' : '-'}</td>
                    <td>${isEq ? `<select onchange="autoSave()">${g.n1.map(o=>`<option>${o}</option>`).join('')}</select>` : '-'}</td>
                    <td class="col-val-short">${isEq ? '<input type="text" oninput="autoSave()">' : '-'}</td>
                    <td>${isEq ? `<select onchange="autoSave()">${g.n2.map(o=>`<option>${o}</option>`).join('')}</select>` : '-'}</td>
                    <td class="col-val-short">${isEq ? '<input type="text" oninput="autoSave()">' : '-'}</td>
                    <td class="col-emblem">${index < 13 ? `<input type="text" class="${embClass}" oninput="autoSave()">` : '-'}</td>
                    <td class="col-emblem">${index < 13 ? `<input type="text" class="${embClass}" oninput="autoSave()">` : '-'}</td>
                    <td>${index < 13 ? '<input type="text" oninput="autoSave()">' : '-'}</td>
                    <td class="col-val-short">${index < 13 ? '<input type="text" oninput="autoSave()">' : '-'}</td>
                    <td><input type="text" oninput="autoSave()"></td>`;
            }
            tbody.appendChild(tr);
        });

        document.getElementById('characterContainer').appendChild(section);

        if (savedData) {
            const inputs = section.querySelectorAll('input, select');
            savedData.inputs.forEach((d, idx) => {
                if (inputs[idx]) {
                    inputs[idx].value = d.val;
                    inputs[idx].className = d.cls;
                }
            });
            toggleEdit(charId, savedData.locked);
        } else {
            toggleEdit(charId, false);
        }
    }

    function toggleEdit(charId, isLock) {
        const section = document.getElementById(charId);
        if(!section) return;
        section.querySelectorAll('input, select').forEach(el => el.disabled = isLock);
        const lBtn = section.querySelector('.lock-btn');
        const uBtn = section.querySelector('.unlock-btn');
        if (isLock) {
            lBtn.classList.add('btn-active');
            uBtn.classList.remove('btn-active');
        } else {
            uBtn.classList.add('btn-active');
            lBtn.classList.remove('btn-active');
        }
        autoSave();
    }

    function deleteCharacter(charId) {
        if(confirm("ì´ ìºë¦­í„° ì •ë³´ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
            const section = document.getElementById(charId);
            if(section) section.remove();
            autoSave();
        }
    }

    function updateStyle(el, type) {
        el.className = Array.from(el.classList).filter(c => !c.startsWith('rare-') && !c.startsWith('ex-') && !c.startsWith('bg-') && c !== 'prefix-selected' && !c.startsWith('emb-bg-')).join(' ');
        if (el.value) {
            if (type === 'rarity') el.classList.add('rare-' + el.value);
            else if (type === 'exceed') el.classList.add('ex-' + el.value);
            else if (type === 'prefix') el.classList.add('prefix-selected');
            else if (type === 'artBg') {
                el.classList.add('bg-' + el.value);
                const target = el.parentElement.querySelector('.art-opt-select');
                if(target) target.className = 'art-opt-select bg-' + el.value;
            }
        }
        autoSave();
    }

    function autoSave() {
        clearTimeout(window.sTime);
        window.sTime = setTimeout(() => {
            const sections = document.querySelectorAll('.char-section');
            const allData = Array.from(sections).map(sec => {
                const lockBtn = sec.querySelector('.lock-btn');
                return {
                    locked: lockBtn ? lockBtn.classList.contains('btn-active') : false,
                    inputs: Array.from(sec.querySelectorAll('input, select')).map(el => ({ val: el.value, cls: el.className }))
                };
            });
            localStorage.setItem('multi_rpg_data', JSON.stringify(allData));
            const sm = document.getElementById('statusMsg');
            if(sm) {
                sm.innerText = "ğŸ’¾ ì €ì¥ë¨";
                setTimeout(() => sm.innerText = "", 1000);
            }
        }, 1000);
    }

    function exportToJSON() {
        const data = localStorage.getItem('multi_rpg_data');
        const blob = new Blob([data], { type: "application/json" });
        const a = document.createElement("a");
        a.href = URL.createObjectURL(blob);
        a.download = `rpg_equipment_backup.json`;
        a.click();
    }

    function importFromJSON(input) {
        const reader = new FileReader();
        reader.onload = (e) => {
            try {
                const data = JSON.parse(e.target.result);
                document.getElementById('characterContainer').innerHTML = "";
                data.forEach(d => createCharacterTable(d));
                autoSave();
            } catch(e) { alert("íŒŒì¼ ë¡œë“œ ì‹¤íŒ¨"); }
        };
        reader.readAsText(input.files[0]);
    }

    window.onload = () => {
        const saved = JSON.parse(localStorage.getItem('multi_rpg_data') || "[]");
        if (saved.length > 0) saved.forEach(d => createCharacterTable(d));
        else createCharacterTable();
    };
</script>
</body>
</html>